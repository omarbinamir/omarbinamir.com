<!DOCTYPE html>
<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Fire Burgers | Brick Burgers HQ</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
    <!-- Material Symbols -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "var(--primary)",
                        "secondary": "var(--secondary)",
                        "accent": "var(--accent)",
                        "background-light": "#ffffff",
                        "background-dark": "#0a0a0a",
                        "text-dark": "#1d190c",
                    },
                    fontFamily: {
                        "display": ["Work Sans", "sans-serif"],
                        "creepy": ["Creepster", "system-ui"],
                        "retro": ["'Press Start 2P'", "cursive"],
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                    animation: {
                        'flicker': 'flicker 3s infinite',
                        'ember': 'ember 5s infinite linear',
                        'float': 'float 6s ease-in-out infinite',
                    }
                },
            },
        }
    </script>
    <style>
        :root {
            --primary: #ff4d00;
            --secondary: #cf1010;
            --accent: #ffcc00;
            --bg-grid: #ff4d00;
        }

        /* --- THEME DEFINITIONS --- */
        .theme-reverted {
            filter: invert(1) hue-rotate(180deg);
        }

        .theme-reverted img,
        .theme-reverted video {
            filter: invert(1) hue-rotate(180deg);
        }

        .theme-radioactive {
            --primary: #00ff00;
            --secondary: #008800;
            --bg-grid: #00ff00;
            --accent: #ffff00;
        }

        .theme-radioactive body {
            filter: sepia(0.2) hue-rotate(85deg) saturate(2);
        }

        .theme-rubikscuber {
            --primary: #ffffff;
            --secondary: #0000ff;
            --bg-grid: #ffffff;
            --accent: #ff0000;
        }

        .theme-rubikscuber .menu-item:nth-child(4n+1) {
            border-color: #ff0000;
            background: #ff000018;
        }

        .theme-rubikscuber .menu-item:nth-child(4n+2) {
            border-color: #00ff00;
            background: #00ff0018;
        }

        .theme-rubikscuber .menu-item:nth-child(4n+3) {
            border-color: #0000ff;
            background: #0000ff18;
        }

        .theme-rubikscuber .menu-item:nth-child(4n+4) {
            border-color: #ffff00;
            background: #ffff0018;
        }

        .theme-frost {
            --primary: #00ffff;
            --secondary: #0088ff;
            --bg-grid: #00ffff;
            --accent: #ffffff;
        }

        .theme-neon {
            --primary: #ff00ff;
            --secondary: #00ffff;
            --bg-grid: #ff00ff;
            --accent: #ffffff;
        }

        .theme-toxic {
            --primary: #7d00ff;
            --secondary: #ff007d;
            --bg-grid: #7d00ff;
            --accent: #00ff00;
        }

        .theme-golden {
            --primary: #ffcc00;
            --secondary: #aa8800;
            --bg-grid: #ffcc00;
            --accent: #ffffff;
        }

        .theme-lava {
            --primary: #ffbb00;
            --secondary: #cc0000;
            --bg-grid: #ff4400;
            --accent: #ffff00;
        }

        .theme-cyber {
            --primary: #00ff99;
            --secondary: #9900ff;
            --bg-grid: #00ff99;
            --accent: #ffffff;
        }

        .theme-retro {
            --primary: #ffee00;
            --secondary: #552200;
            --bg-grid: #884400;
        }

        .theme-retro * {
            font-family: 'Press Start 2P', cursive !important;
            font-size: inherit;
        }

        .theme-sunset {
            --primary: #ff5e62;
            --secondary: #ff9966;
            --bg-grid: #ff5e62;
            --accent: #ffcc00;
        }

        .theme-midnight {
            --primary: #ff0000;
            --secondary: #1a1a1a;
            --bg-grid: #333333;
            --accent: #666666;
        }

        .theme-ocean {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --bg-grid: #00d2ff;
            --accent: #ffffff;
        }

        .theme-matrix {
            --primary: #00ff41;
            --secondary: #003b00;
            --bg-grid: #00ff41;
            --accent: #00ff41;
        }

        .theme-matrix body {
            background-color: black !important;
        }

        .theme-bloodmoon {
            --primary: #830000;
            --secondary: #300000;
            --bg-grid: #ff0000;
            --accent: #000000;
        }

        .theme-emerald {
            --primary: #50c878;
            --secondary: #046307;
            --bg-grid: #50c878;
            --accent: #ffffff;
        }

        .theme-sapphire {
            --primary: #0f52ba;
            --secondary: #002366;
            --bg-grid: #0f52ba;
            --accent: #ffffff;
        }

        .theme-vaporwave {
            --primary: #00e5ff;
            --secondary: #ff00ff;
            --bg-grid: #ff00ff;
            --accent: #fbff00;
        }

        .theme-monochrome {
            --primary: #ffffff;
            --secondary: #000000;
            --bg-grid: #888888;
            --accent: #444444;
        }

        .theme-magma-blue {
            --primary: #00aaff;
            --secondary: #004488;
            --bg-grid: #00aaff;
            --accent: #ffffff;
        }

        .theme-forest {
            --primary: #228b22;
            --secondary: #004d00;
            --bg-grid: #228b22;
            --accent: #daa520;
        }

        .theme-candy {
            --primary: #ff1493;
            --secondary: #ff00ff;
            --bg-grid: #ff1493;
            --accent: #adff2f;
        }

        .theme-abyssal {
            --primary: #4b0082;
            --secondary: #000000;
            --bg-grid: #4b0082;
            --accent: #ffffff;
        }

        .theme-abyssal body {
            background-color: #050005 !important;
        }


        /* --- GLOBAL STYLES --- */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        .fire-grid {
            background-image: radial-gradient(circle, var(--bg-grid) 1px, transparent 1px);
            background-size: 25px 25px;
            opacity: 0.1;
        }

        @keyframes ember {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                transform: translateY(-100vh) translateX(50px) scale(0);
                opacity: 0;
            }
        }

        .ember {
            position: absolute;
            background: var(--primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
        }

        .heat-char {
            display: inline-block;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .creepy-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9999;
            background: radial-gradient(circle 150px at var(--x, 0) var(--y, 0), transparent 0%, rgba(0, 0, 0, 0.98) 100%);
            display: none;
        }

        body.creepy-mode {
            background-color: #050000 !important;
            filter: grayscale(0.5) contrast(1.5) brightness(0.8) sepia(0.2);
            font-family: 'Creepster', cursive !important;
        }

        .creepy-mode h1,
        .creepy-mode h2,
        .creepy-mode h3,
        .creepy-mode span {
            color: #ff0000 !important;
            text-shadow: 0 0 10px #ff0000;
        }

        .creepy-mode img {
            filter: grayscale(1) invert(0.1) contrast(2);
        }

        .creepy-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #600;
            color: white;
            padding: 5px;
            text-align: center;
            font-family: 'Creepster', cursive;
            z-index: 10000;
            display: none;
            letter-spacing: 5px;
        }

        /* === VIP SECRET CODE EFFECTS === */

        /* Party Mode */
        body.party-mode {
            animation: partyPulse 0.5s infinite alternate;
        }

        @keyframes partyPulse {
            from {
                filter: hue-rotate(0deg);
            }

            to {
                filter: hue-rotate(30deg);
            }
        }

        /* Rainbow Mode */
        body.rainbow-mode {
            animation: rainbowCycle 3s linear infinite;
        }

        @keyframes rainbowCycle {
            0% {
                filter: hue-rotate(0deg);
            }

            100% {
                filter: hue-rotate(360deg);
            }
        }

        /* Turbo Mode */
        body.turbo-mode * {
            animation-duration: 0.2s !important;
            transition-duration: 0.1s !important;
        }

        /* Ghost Mode */
        body.ghost-mode {
            opacity: 0.7;
        }

        body.ghost-mode img,
        body.ghost-mode video {
            opacity: 0.5;
        }

        /* Lava Mode */
        body.lava-mode {
            --primary: #ff4500;
            --secondary: #ff0000;
            box-shadow: inset 0 0 200px rgba(255, 69, 0, 0.3);
        }

        /* Frost Mode (code activated) */
        body.frost-mode {
            --primary: #00ffff;
            --secondary: #0088ff;
            filter: brightness(1.1) saturate(0.8);
            box-shadow: inset 0 0 200px rgba(0, 255, 255, 0.2);
        }

        /* Matrix Mode */
        body.matrix-mode {
            --primary: #00ff41;
            --secondary: #003b00;
        }

        /* Code Popup Animations */
        @keyframes codePopIn {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-10deg);
                opacity: 0;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.1) rotate(2deg);
            }

            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes codePopOut {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }
        }

        /* OBATREX Glitch BG */
        #obatrex-bg {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 0;
            opacity: 0.15;
            pointer-events: none;
            overflow: hidden;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            color: #00ff41;
            font-size: 8vw;
            font-weight: 900;
            white-space: pre-wrap;
            animation: glitchText 0.3s infinite linear alternate;
        }

        @keyframes glitchText {
            0% {
                transform: translate(0);
                text-shadow: 2px 2px #ff0000;
            }

            25% {
                transform: translate(-2px, 2px);
                text-shadow: -2px -2px #0000ff;
            }

            50% {
                transform: translate(2px, -2px);
                text-shadow: 2px -2px #ff00ff;
            }

            75% {
                transform: translate(-1px, -1px);
                text-shadow: -1px 1px #ffff00;
            }

            100% {
                transform: translate(1px, 1px);
                text-shadow: 1px -1px #00ffff;
            }
        }

        #heat-index-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ffcc00, var(--primary), var(--secondary));
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .discount-token-badge {
            background: var(--accent);
            color: black;
            font-weight: 900;
            padding: 2px 10px;
            border-radius: 99px;
            font-size: 11px;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
            border: 2px solid black;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        /* VIP Challenge Modal Styles */
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-animate {
            animation: modalFadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .vip-input-glow:focus {
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.2);
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display smooth-scroll text-text-dark dark:text-white antialiased selection:bg-primary selection:text-text-dark overflow-x-hidden theme-fire-hq">

    <!-- VIP Challenge Popup -->
    <div id="vip-challenge-modal" class="fixed inset-0 z-[2000] flex items-center justify-center bg-black/80 hidden">
        <div
            class="relative bg-[#151308] border-2 border-primary/50 rounded-3xl p-8 max-w-2xl w-full mx-4 overflow-hidden shadow-2xl modal-animate">

            <div class="relative z-10 flex flex-col items-center text-center">
                <!-- Header Images -->
                <div class="flex items-center justify-center gap-4 sm:gap-10 mb-8 w-full">
                    <div class="bg-[#151308] p-2 rounded-2xl">
                        <img src="vip.png" alt="Shocked Face"
                            class="w-20 h-20 sm:w-36 sm:h-36 object-contain animate-bounce">
                    </div>
                    <h2
                        class="text-3xl sm:text-5xl font-black uppercase italic tracking-tighter text-white leading-tight flex-shrink-0">
                        Win <span class="text-primary">VIP</span> <br> <span
                            class="text-white/90 text-2xl sm:text-3xl">For a Food Idea</span>
                    </h2>
                    <div class="bg-[#151308] p-2 rounded-2xl">
                        <img src="VIP3x-challenge.png" alt="Pointing"
                            class="w-28 h-28 sm:w-56 sm:h-56 object-contain -scale-x-100">
                    </div>
                </div>

                <p class="text-gray-400 mb-8 font-medium text-sm sm:text-base max-w-md">
                    Submit your legendary burger concept today. In <span class="text-white font-bold">30 days</span>,
                    OMAR will hand-pick the winner to receive exclusive <span
                        class="text-primary font-black uppercase">VIP Status</span>!
                </p>

                <form id="vip-idea-form" class="w-full space-y-5">
                    <div class="text-left">
                        <label
                            class="text-[10px] font-black uppercase tracking-[0.2em] text-primary ml-2 mb-1.5 block">Burger
                            Name</label>
                        <input type="text" id="burger-name" required placeholder="The Magma Crunch..."
                            class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white placeholder:text-white/20 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all vip-input-glow">
                    </div>

                    <div class="text-left">
                        <label
                            class="text-[10px] font-black uppercase tracking-[0.2em] text-primary ml-2 mb-1.5 block">The
                            Recipe</label>
                        <textarea id="burger-recipe" required
                            placeholder="Tell me your secret ingredients and build process..."
                            class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white placeholder:text-white/20 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all h-28 resize-none vip-input-glow"></textarea>
                    </div>

                    <div class="text-left">
                        <label
                            class="text-[10px] font-black uppercase tracking-[0.2em] text-primary ml-2 mb-1.5 block">Style
                            & Aesthetics</label>
                        <input type="text" id="burger-style" required placeholder="Cyberpunk, Retro, Gourmet fiery..."
                            class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white placeholder:text-white/20 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all vip-input-glow">
                    </div>

                    <button type="submit"
                        class="w-full h-16 bg-primary text-black font-black uppercase tracking-widest rounded-xl hover:bg-secondary hover:text-white transition-all transform active:scale-95 shadow-xl shadow-primary/20 mt-6 flex items-center justify-center gap-3">
                        <span class="material-symbols-outlined">send</span>
                        Submit Challenge
                    </button>

                    <button type="button" onclick="closeVipModal()"
                        class="text-gray-500 hover:text-white text-[10px] font-black uppercase tracking-[0.3em] mt-4 transition-colors">
                        [ Dismiss Challenge ]
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Creepy Vignette Overlay -->
    <div id="creepy-vignette" class="creepy-overlay"></div>

    <!-- OBATREX Glitch BG -->
    <div id="obatrex-bg" class="hidden">
        Ơ̸̧̧̧̛̫͇̣̫̣̗̭͇̼͔͈̲͇̙̪͙̜͇̥͔͎͕̮̘͖͈̂̍̔̓͌̄̆̌̓͆͊͑̑̔͂́͐͋͑̀̋̑̔̊̐̒̊͋̈̏̋̀̈́̓̓̇̇͌̉̚͘͘͜͜͝͝ͅͅͅB̵̢̛̝͓̺͖̯͎̙͔̘̺͚̮̈́̾̀̄͂͂͑̈́̉̈̈́̈̍̆̅͊͒̈͋̏̉̈́̆͗͆̊̈́̀͐͆̓͌̿̾́̓͆͒̽͛͘͘̚̕̕͜͝Ǎ̶̧̨̧̡̙̯̙͎͍̪̠͙͙̗̯̜̞̩͉̣̥̝̺̗̻͔͓̼̦̰̙̤̼̫̼̝̲̝̈́̋̊̈́̈́̽̈́̔̄͆͒͐̆̄͒́̈́̇́̓͂͂̋̈́̓͌̀͂̏̓͆̿̾̓͑͑͂̓̂̆̚͜͜͝͝͝͝͝ͅ
    </div>
    <div id="creepy-banner" class="creepy-banner">CREEPY MODE ACTIVATED: 40% VOID DISCOUNT</div>
    <div id="oba-banner"
        class="bg-primary text-black font-black text-center p-1 text-[10px] hidden uppercase tracking-widest fixed top-0 left-0 right-0 z-[100]">
        OBA MODE ACTIVE: RS. 50 DISCOUNT</div>

    <!-- Header -->
    <div
        class="fixed top-0 left-0 right-0 z-50 bg-black/95 backdrop-blur-md border-b border-white/10 dark:bg-background-dark/95">
        <div class="max-w-[1280px] mx-auto px-4 sm:px-10 py-4 flex items-center justify-between">
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-6">
                    <button id="cart-btn"
                        class="relative group flex items-center justify-center w-10 h-10 bg-white/5 hover:bg-primary transition-all rounded-lg text-white group-hover:text-black">
                        <span class="material-symbols-outlined">shopping_cart</span>
                        <span id="cart-count"
                            class="absolute -top-2 -right-2 bg-secondary text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-black hidden">0</span>
                    </button>
                    <!-- Token Badge -->
                    <div id="token-display"
                        class="hidden flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/10">
                        <span class="material-symbols-outlined text-[#ffcc00] text-sm fill-1">confirmation_number</span>
                        <span id="token-count" class="text-[#ffcc00] font-black text-xs">0</span>
                        <span class="text-[8px] text-gray-500 uppercase tracking-tighter ml-1">Tokens</span>
                    </div>
                    <!-- Themes Button -->
                    <button id="header-themes-btn"
                        class="hidden items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/10 hover:border-primary transition-all">
                        <span class="material-symbols-outlined text-primary text-sm">palette</span>
                        <span class="text-[8px] text-gray-500 uppercase tracking-tighter font-black">Themes</span>
                    </button>
                </div>

                <div id="logo-btn" class="flex items-center gap-3 text-white group cursor-pointer">
                    <div
                        class="w-8 h-8 text-primary transition-colors duration-300 group-hover:rotate-6 drop-shadow-[0_0_8px_rgba(255,77,0,0.8)]">
                        <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 20C8 12.268 15.1634 6 24 6C32.8366 6 40 12.268 40 20H8Z" fill="currentColor">
                            </path>
                            <rect fill="#ffffff" height="12" rx="2" width="36" x="6" y="24"></rect>
                            <path d="M8 40C8 42.2091 15.1634 44 24 44C32.8366 44 40 42.2091 40 40V38H8V40Z"
                                fill="currentColor"></path>
                        </svg>
                    </div>
                    <h1 class="text-sm font-black uppercase tracking-tight hidden lg:block italic">FIRE HQ</h1>
                </div>
            </div>

            <div class="flex items-center gap-8">
                <nav
                    class="hidden md:flex items-center gap-8 text-[10px] font-black uppercase tracking-[0.3em] text-gray-400">
                    <button id="nav-deals" class="hover:text-primary transition-all">Deals</button>
                    <a href="#menu-grid" class="hover:text-primary transition-all">Burgers</a>
                    <a href="#sides-section" class="hover:text-primary transition-all">Sides</a>
                    <a href="imagerly.html" class="hover:text-primary transition-all">Imagerly</a>
                    <a href="#discount-club"
                        class="hover:text-primary transition-all text-primary border-b-2 border-primary">Club</a>
                </nav>

                <div class="flex items-center gap-4">
                    <button id="turbo-toggle"
                        class="w-10 h-10 flex items-center justify-center hover:bg-white/5 rounded-lg transition-all"
                        title="Toggle Turbo Mode">
                        <span class="material-symbols-outlined">bolt</span>
                    </button>
                    <button id="menu-scroll-btn"
                        class="premium-btn group flex items-center justify-center gap-2 h-10 px-6 bg-primary hover:bg-secondary active:scale-95 transition-all rounded-lg text-white text-sm font-bold uppercase tracking-wider">
                        <span>Menu</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="pt-[73px]">
        <!-- Hero Section -->
        <section class="relative min-h-[90vh] flex items-center justify-center bg-background-dark overflow-hidden">
            <div class="absolute inset-0 z-0 fire-grid"></div>
            <div class="absolute inset-0 z-0 text-white">
                <img alt="Gourmet Burger" class="w-full h-full object-cover opacity-60 mix-blend-lighten scale-110"
                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuBPJ2hL3UlSpfdmS6UebDg99uXQ4bWDRG6wl4JXcY8aCC0meewqXEqPY0ZFCsZ_CRqJi50fN12G3s9j755-8jji3kqpax8fkaEYbxiVUSqtfSmvzzKes-vnrGln_u_qXP00lR-g4gOLOTRqmjAjtsSm5kMsdUm5K1YjZqwYooBltqbzeIE4Tq2LAcau_U27Ft8AZaNjDTdjlNs5itFlNWKxHMN59YpW4q1OrCDRyfY-VA0FWZ6E-JWzXLkOhD5U4b_dmxwpEUEcGAhM" />
                <div
                    class="absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/60 to-transparent">
                </div>
            </div>

            <div
                class="relative z-10 container mx-auto px-4 sm:px-10 text-center sm:text-left flex flex-col items-center sm:items-start gap-6 max-w-[1280px]">
                <h1
                    class="text-white text-5xl sm:text-7xl md:text-8xl font-black leading-[0.9] tracking-tighter max-w-4xl drop-shadow-[0_0_30px_rgba(255,100,0,0.4)]">
                    BRINGING <br />
                    <span class="italic inline-flex gap-2" id="heat-title">
                        <span class="heat-char">T</span>
                        <span class="heat-char">H</span>
                        <span class="heat-char">E</span>
                        <span class="w-4"></span>
                        <span class="heat-char">H</span>
                        <span class="heat-char">E</span>
                        <span class="heat-char">A</span>
                        <span class="heat-char">T</span>
                    </span>
                </h1>
                <p class="text-[12px] font-black tracking-[0.5em] text-primary uppercase" id="celsius-display">
                    Diagnostic: 37°C</p>
                <div class="mt-4">
                    <button id="hero-deals-btn"
                        class="premium-btn flex items-center justify-center h-14 px-8 bg-primary text-white text-base font-bold uppercase tracking-wider rounded-lg shadow-lg">Access
                        Deals</button>
                </div>
            </div>
        </section>

        <!-- Menu Grid -->
        <section id="menu-section" class="py-20 bg-background-light dark:bg-[#0a0a0a] relative">
            <div class="container mx-auto px-4 sm:px-10 max-w-[1280px]">
                <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Cards -->
                    <div
                        class="menu-item burger group bg-white dark:bg-[#151308] rounded-2xl overflow-hidden border border-gray-100 dark:border-white/5 shadow-lg flex flex-col">
                        <div class="h-64 overflow-hidden relative"><img class="w-full h-full object-cover"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDNpPAw5TBBj1WOVRjaKUFzJ_bT0qARJEFlZdGRtWlLyaUc49cly1aqO8OT7lI0asCA5Xw2QT5e5ZFv1k4KQWddWd4ZXVr8Rs5RhA8AxtGsASB632zqbDtbgywq-xSIYNxhin6hA3MZr4_EYtdwtsYIniTrZh7wumDN9WcuDCGJnSxTgQ3IS0ieB5ylk9JnIySmX8E2s8WXvFSTAx8Cvu80gxiBfsNfsuDvY7zTG2jl89PGbEoGq0kP9w0GIaQkjxQNmVM4jDeTDUlV">
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-2xl font-black mb-2 uppercase italic">The Brick Classic</h3>
                            <p class="text-gray-500 text-sm mb-6 flex-grow">Single chicken girder, structural cheese,
                                pickles.</p>
                            <div
                                class="flex items-center justify-between pt-4 border-t border-dashed border-gray-200 dark:border-white/10 mt-auto">
                                <span class="text-xl font-black">Rs. 1,250</span>
                                <button onclick="addToCart('The Brick Classic', 1250)"
                                    class="w-12 h-12 bg-primary text-black rounded-xl flex items-center justify-center font-black">ADD</button>
                            </div>
                        </div>
                    </div>
                    <div
                        class="menu-item burger group bg-white dark:bg-[#151308] rounded-2xl overflow-hidden border border-gray-100 dark:border-white/5 shadow-lg flex flex-col">
                        <div class="h-64 overflow-hidden relative"><img class="w-full h-full object-cover"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDUwzcDIWZD_n0GxCtHBPt_aSSibJiE4F1rWlhHV9qFQ3dAjDyfLDpCnYpgkBpE9vUas1Mo0yOEJH3epWB6GNwhVTW7Cf65T5AWEjnEqhpgZDsC6jwse5qj5lo-AcUYPKkPZlwJNa15OAuYU0gJeZ--9Vj6a30mFERxKZrgJy2FNtujwPlzRHjP0Wt6YshxBZC7YOQJtUyg6qzw-9GA11qjoxuFUUTvqbbqUgihlYGT6Zm-12IojguJiDISTYTopNSd60iXSaV-yhwQ">
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-2xl font-black mb-2 uppercase italic">The Golden Crunch</h3>
                            <p class="text-gray-500 text-sm mb-6 flex-grow">Reinforced buttermilk chicken, spicy slaw
                                insulation.</p>
                            <div
                                class="flex items-center justify-between pt-4 border-t border-dashed border-gray-200 dark:border-white/10 mt-auto">
                                <span class="text-xl font-black">Rs. 1,400</span>
                                <button onclick="addToCart('The Golden Crunch', 1400)"
                                    class="w-12 h-12 bg-primary text-black rounded-xl flex items-center justify-center font-black">ADD</button>
                            </div>
                        </div>
                    </div>
                    <div
                        class="menu-item burger group bg-white dark:bg-[#151308] rounded-2xl overflow-hidden border border-gray-100 dark:border-white/5 shadow-lg flex flex-col">
                        <div class="h-64 overflow-hidden relative"><img class="w-full h-full object-cover"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuCRJgAongnFo49FOW98mAmRGi86bkE-GxIRUus3KDHlSeRihSgiTKISYiduAHPYlZA3Pk6EH-ZWJuHQFIYRQJzDdOaloF0pQZw5pUaCITB88ikbl_BWLeqIRVXEw0M2OGB0GycN5cMygm5KqIXfJJ-d1HUlPgdOvSlEaCVLhkG4pOP6eaSmIzGIH0GtL564vp27XhaO43dyRhPauoTATWPRWwhjm6OJRGY4hAgbrYp-9gq1y1oFLuAiGt_BCsGDyHaXb1i04Bfbf2Gz">
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-2xl font-black mb-2 uppercase italic">The Smash Wall</h3>
                            <p class="text-gray-500 text-sm mb-6 flex-grow">Triple stack chicken, caramelized mortar.
                            </p>
                            <div
                                class="flex items-center justify-between pt-4 border-t border-dashed border-gray-200 dark:border-white/10 mt-auto">
                                <span class="text-xl font-black">Rs. 1,600</span>
                                <button onclick="addToCart('The Smash Wall', 1600)"
                                    class="w-12 h-12 bg-primary text-black rounded-xl flex items-center justify-center font-black">ADD</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="sides-section"
                    class="mt-20 p-8 border border-white/10 rounded-2xl bg-white/5 backdrop-blur-sm">
                    <h3 class="text-2xl font-black uppercase mb-8 italic">Sides & Materials</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div onclick="addToCart('Rustic Fries', 450)"
                            class="flex justify-between p-4 bg-white/5 rounded-xl border border-transparent hover:border-primary cursor-pointer transition-all">
                            <span class="font-bold">Rustic Fries</span>
                            <span class="text-primary font-black">Rs. 450</span>
                        </div>
                        <div onclick="addToCart('Onion Rings', 550)"
                            class="flex justify-between p-4 bg-white/5 rounded-xl border border-transparent hover:border-primary cursor-pointer transition-all">
                            <span class="font-bold">Onion Rings</span>
                            <span class="text-primary font-black">Rs. 550</span>
                        </div>
                        <div onclick="addToCart('Craft Sodas', 300)"
                            class="flex justify-between p-4 bg-white/5 rounded-xl border border-transparent hover:border-primary cursor-pointer transition-all">
                            <span class="font-bold">Craft Sodas</span>
                            <span class="text-primary font-black">Rs. 300</span>
                        </div>
                        <div onclick="addToCart('Concrete Shakes', 600)"
                            class="flex justify-between p-4 bg-white/5 rounded-xl border border-transparent hover:border-primary cursor-pointer transition-all">
                            <span class="font-bold">Concrete Shakes</span>
                            <span class="text-primary font-black">Rs. 600</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Discount Club Section -->
        <section id="discount-club" class="py-20 bg-black text-white relative border-t border-white/10 overflow-hidden">
            <div id="ember-container-club" class="absolute inset-0 pointer-events-none"></div>
            <div class="container mx-auto px-4 sm:px-10 max-w-[1280px] relative z-20">
                <div class="flex flex-col lg:flex-row gap-16">
                    <div class="w-full lg:w-1/2">
                        <div class="flex items-center gap-4 mb-6">
                            <h2 class="text-4xl font-black uppercase italic tracking-tighter">Discount Club</h2>
                            <div
                                class="flex items-center gap-2 bg-primary/20 px-4 py-1 rounded-full border border-primary/30">
                                <span
                                    class="material-symbols-outlined text-primary text-sm fill-1 font-bold">confirmation_number</span>
                                <span id="club-token-display" class="text-primary font-black text-base">0</span>
                                <span class="text-[8px] text-primary/70 uppercase font-black">Tokens</span>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <p class="text-gray-400">Join the elite core to earn **Discount Tokens**. Each token takes
                                out **Rs. 5** from your total. <span class="text-primary font-bold underline">NEW
                                    RECRUITS GET 1 TOKEN ON SIGNUP!</span></p>
                            <div class="bg-white/5 border border-white/10 p-8 rounded-2xl backdrop-blur-sm">
                                <h3 class="text-xl font-bold mb-4 uppercase italic">Identity Verification</h3>
                                <div id="club-not-authenticated">
                                    <p class="text-sm text-gray-500 mb-6 font-medium">Gain access via Google Secure
                                        Login to unlock the Theme Vault and your recruit bonus.</p>
                                    <button id="auth-btn"
                                        class="w-full h-14 bg-primary text-black font-black uppercase rounded-xl hover:bg-secondary hover:text-white transition-all flex items-center justify-center gap-3 active:scale-95">
                                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                                            <path fill="currentColor"
                                                d="M21.35 11.1h-9.17v2.73h5.14c-.22 1.2-1.07 2.22-2.18 2.97v2.47h3.53c2.06-1.9 3.25-4.7 3.25-8.17s-.11-1.33-.57-2H21.35zM12.18 21c2.43 0 4.47-.8 5.96-2.18l-3.53-2.47c-1.08.73-2.47 1.15-3.93 1.15-2.31 0-4.27-1.56-4.97-3.66H1.94v2.55C3.42 19.34 7.55 21 12.18 21zM7.21 13.84c-.18-.54-.28-1.12-.28-1.72s.1-1.18.28-1.72V7.85H1.94C1.3 9.1 1 10.5 1 12s.3 2.9.94 4.15l5.27-2.31zM12.18 6.02c1.33 0 2.52.46 3.46 1.36l2.58-2.58C16.65 3.19 14.61 2.38 12.18 2.38 7.55 2.38 3.42 4.04 1.94 6.94l5.27 2.31c.7-2.1 2.66-3.66 4.97-3.66z" />
                                        </svg>
                                        Sign in with Google
                                    </button>
                                </div>
                                <div id="club-authenticated" class="hidden text-center space-y-4">
                                    <img id="user-photo"
                                        class="w-16 h-16 rounded-full mx-auto border-4 border-primary shadow-[0_0_15px_rgba(255,77,0,0.5)]"
                                        src="">
                                    <div>
                                        <p class="text-lg font-black uppercase tracking-widest text-primary"
                                            id="auth-id-display">IDENTIFIED</p>
                                        <p class="text-xs text-gray-500 font-bold" id="user-email"></p>
                                    </div>
                                    <button id="logout-btn"
                                        class="text-xs text-gray-500 hover:text-white underline font-bold uppercase">Terminate
                                        Session</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="theme-vault-container" class="w-full lg:w-1/2 hidden border-l border-white/10 pl-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-black uppercase italic text-primary">System Theme Vault</h2>
                            <p class="text-[10px] text-gray-500 uppercase font-black tracking-widest">Store: 1
                                Token/Skin</p>
                        </div>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 h-[400px] overflow-y-auto pr-2 custom-scrollbar"
                            id="theme-shop"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Founder Section -->
        <section class="bg-black text-white py-20 relative overflow-hidden">
            <div
                class="container mx-auto px-4 sm:px-10 max-w-[1024px] flex flex-col md:flex-row items-center gap-12 relative z-10">
                <div class="w-full md:w-1/2 flex justify-center md:justify-end">
                    <div class="relative">
                        <div
                            class="w-64 h-80 sm:w-80 sm:h-96 rounded-lg overflow-hidden bg-neutral-900 border-4 border-primary rotate-3 shadow-[0_0_30px_rgba(255,77,0,0.3)]">
                            <img alt="Founder" class="w-full h-full object-cover" src="op.png" />
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 text-center md:text-left">
                    <span class="text-primary font-bold uppercase text-sm tracking-widest">The Founder</span>
                    <blockquote class="text-3xl sm:text-4xl font-black italic mt-4 mb-4 leading-tight">"We don't just
                        cook; we construct flavor."</blockquote>
                    <h4 class="text-xl font-bold uppercase">Omarbinamir Obai</h4>
                </div>
            </div>
        </section>
    </div>

    <!-- Deals Modal -->
    <div id="deals-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl" id="deals-scrim"></div>
        <div
            class="relative w-full max-w-4xl bg-neutral-900 border border-white/10 p-8 rounded-3xl overflow-y-auto max-h-[90vh]">
            <h2 class="text-4xl font-black text-white uppercase italic text-center mb-12">Authorized Clearance</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Deals -->
                <div class="p-6 bg-black border border-white/5 rounded-2xl group hover:border-primary transition-all">
                    <h3 class="text-xl font-black text-white uppercase mb-2">Just Kiddin'</h3>
                    <p class="text-xs text-gray-500 mb-4 font-medium italic">Small burger, fries, materials.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-black">Rs. 850</span>
                        <button onclick="addToCart('Just Kiddin Deal', 850)"
                            class="w-10 h-10 bg-primary rounded-lg text-black flex items-center justify-center font-black transition-all active:scale-90">+</button>
                    </div>
                </div>
                <!-- Highlighted -->
                <div
                    class="p-6 bg-black border-2 border-primary rounded-2xl shadow-[0_0_20px_rgba(255,77,0,0.2)] scale-105">
                    <h3 class="text-xl font-black text-white uppercase mb-2">OBA MEAL</h3>
                    <p class="text-xs text-gray-400 mb-4 font-bold italic">3 Burgers, 3 Fries, 3 Sodas, 5 Strips.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-black">Rs. 3,800</span>
                        <button onclick="addToCart('OBA MEAL', 3800)"
                            class="w-10 h-10 bg-primary rounded-lg text-black flex items-center justify-center font-black transition-all active:scale-90">+</button>
                    </div>
                </div>
                <div class="p-6 bg-black border border-white/5 rounded-2xl group hover:border-primary transition-all">
                    <h3 class="text-xl font-black text-white uppercase mb-2">Starter Pack</h3>
                    <p class="text-xs text-gray-500 mb-4 font-medium italic">Everything mini. Samples.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-black">Rs. 300</span>
                        <button onclick="addToCart('Starter Pack', 300)"
                            class="w-10 h-10 bg-primary rounded-lg text-black flex items-center justify-center font-black transition-all active:scale-90">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Drawer -->
    <div id="cart-drawer"
        class="fixed inset-y-0 left-0 w-full sm:w-[500px] bg-black text-white z-[110] translate-x-[-100%] transition-transform duration-500 flex flex-col border-r border-white/10">
        <div class="p-8 border-b border-white/5 flex justify-between items-center">
            <h2 class="text-2xl font-black uppercase italic">Thermal Load</h2>
            <button onclick="window.toggleCart()"
                class="text-gray-500 hover:text-white uppercase text-[10px] font-black">Close</button>
        </div>
        <div id="cart-items" class="flex-grow overflow-y-auto p-8 space-y-4"></div>
        <div class="p-8 border-t border-white/5 bg-zinc-950/50 backdrop-blur-md">
            <div id="heat-index-container" class="h-1 bg-white/5 rounded-full overflow-hidden mb-2">
                <div id="heat-index-bar"></div>
            </div>
            <div class="space-y-1 mb-6">
                <div class="flex justify-between text-xs text-gray-500 font-bold uppercase"><span>Subtotal</span><span
                        id="cart-subtotal">Rs. 0</span></div>
                <div id="token-discount-row"
                    class="hidden flex justify-between text-xs text-[#ffcc00] font-black uppercase">
                    <span>Token Discount (<span id="discount-token-applied">0</span> tkn)</span><span
                        id="token-discount-value">-Rs. 0</span>
                </div>
                <div class="flex justify-between items-end pt-4"><span
                        class="font-black uppercase italic text-xl text-white">Total Damage</span><span id="cart-total"
                        class="font-black text-3xl text-primary">Rs. 0</span></div>
            </div>
            <button id="checkout-btn"
                class="w-full bg-primary p-4 rounded-xl text-black font-black uppercase hover:bg-white transition-all shadow-lg active:scale-95">Authorize
                Dispatch</button>
        </div>
    </div>

    <div id="cart-scrim" class="fixed inset-0 bg-black/80 z-[105] hidden opacity-0 transition-opacity"></div>

    <!-- System Module -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, set, get, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // FIREBASE PROJECT ASSET
        const firebaseConfig = {
            apiKey: "AIzaSyDKjRSYZVcV_pJFlqu0h1hmyPshYKyNE7I",
            authDomain: "obalabs-c56ab.firebaseapp.com",
            databaseURL: "https://obalabs-c56ab-default-rtdb.firebaseio.com",
            projectId: "obalabs-c56ab",
            storageBucket: "obalabs-c56ab.firebasestorage.app",
            messagingSenderId: "415868024118",
            appId: "1:415868024118:web:4ea58785b6a175c4fbef97",
            measurementId: "G-31STXB0DGM"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);
        const provider = new GoogleAuthProvider();

        // SHARED SYSTEM STATE
        let cart = [];
        let obaActive = false;
        let creepyActive = false;
        let partyActive = false;
        let matrixActive = false;
        let vipActive = false;
        let rainbowActive = false;
        let turboActive = false;
        let ghostActive = false;
        let lavaActive = false;
        let frostActive = false;
        let obatrexActive = false;

        // SECRET CODES (Only VIP members know these from the Secret Vault!)
        const creepyCode = "creepymodeactivatedantidisistablishmentarisum";
        const partyCode = "party";
        const matrixCode = "matrix";
        const vipCode = "vipaccess";
        const rainbowCode = "rainbow";
        const turboCode = "turbo";
        const ghostCode = "ghost";
        const lavaCode = "lavaflow";
        const frostCode = "icecold";
        const infiniteCode = "infinite";
        const obatrexCode = "obatrex";

        let inputBuffer = "";

        let userState = {
            authenticated: false,
            uid: "",
            tokens: 0,
            purchasedThemes: ["fire-hq"],
            activeTheme: "fire-hq",
            bonusClaimed: false
        };

        const themes = [
            { id: 'fire-hq', name: 'Fire HQ', desc: 'Standard Red' },
            { id: 'reverted', name: 'Reverted', desc: 'Inverted' },
            { id: 'radioactive', name: 'Radioactive', desc: 'Neon Glow' },
            { id: 'rubikscuber', name: 'Rubikscuber', desc: 'Grid Blocks' },
            { id: 'frost', name: 'Sub-Zero', desc: 'Arctic' },
            { id: 'neon', name: 'Cyber Neon', desc: 'Retro Pink' },
            { id: 'toxic', name: 'Biohazard', desc: 'Purple Acid' },
            { id: 'golden', name: 'Elite Gold', desc: 'Premium' },
            { id: 'lava', name: 'Deep Lava', desc: 'Magma' },
            { id: 'cyber', name: 'Emerald Cyber', desc: 'Digital' },
            { id: 'retro', name: 'Retro 8-Bit', desc: 'Pixel' },
            { id: 'sunset', name: 'Sunset Glow', desc: 'Horizon' },
            { id: 'midnight', name: 'Midnight', desc: 'Dark Red' },
            { id: 'ocean', name: 'Deep Ocean', desc: 'Cool Blue' },
            { id: 'matrix', name: 'Matrix', desc: 'Green Code' },
            { id: 'bloodmoon', name: 'Blood Moon', desc: 'Crimson' },
            { id: 'emerald', name: 'Emerald', desc: 'Jewel Green' },
            { id: 'sapphire', name: 'Sapphire', desc: 'Deep Jewel Blue' },
            { id: 'vaporwave', name: 'Vaporwave', desc: '90s Aesthetic' },
            { id: 'monochrome', name: 'Monochrome', desc: 'Black/White' },
            { id: 'magma-blue', name: 'Magma Blue', desc: 'Cobalt Burn' },
            { id: 'forest', name: 'Forest Trail', desc: 'Deep Woods' },
            { id: 'candy', name: 'Candy Pop', desc: 'Neon Sweet' },
            { id: 'abyssal', name: 'Abyssal', desc: 'Deep Void' }
        ];

        // API LAYER
        async function saveToDB() {
            if (!userState.uid) return;
            try {
                await set(ref(db, 'users/' + userState.uid), {
                    tokens: userState.tokens,
                    purchasedThemes: userState.purchasedThemes,
                    activeTheme: userState.activeTheme,
                    bonusClaimed: userState.bonusClaimed
                });
            } catch (e) {
                console.error("FIRE-LAB DB ERROR:", e);
            }
        }

        async function purchaseTheme(id) {
            if (userState.tokens < 1) return alert("Requires 1 Token! Order more burgers or verify your identity.");
            userState.tokens -= 1;
            if (!userState.purchasedThemes.includes(id)) userState.purchasedThemes.push(id);
            await saveToDB();
            updateUI();
        }

        async function activateTheme(id) {
            userState.activeTheme = id;
            await saveToDB();
            updateUI();
        }

        function updateUI() {
            // APPLY ACTIVE SKIN
            document.body.className = `bg-background-light dark:bg-background-dark font-display smooth-scroll text-text-dark dark:text-white antialiased selection:bg-primary selection:text-text-dark overflow-x-hidden theme-${userState.activeTheme}`;
            if (creepyActive) document.body.classList.add('creepy-mode');

            // UPDATE BADGES
            const tokenBadge = document.getElementById('token-display');
            const tokenCount = document.getElementById('token-count');
            const clubTokenDisp = document.getElementById('club-token-display');
            const themeVault = document.getElementById('theme-vault-container');

            if (userState.authenticated) {
                tokenBadge.classList.remove('hidden');
                const themesBtn = document.getElementById('header-themes-btn');
                themesBtn.classList.remove('hidden');
                themesBtn.classList.add('flex');

                tokenCount.innerText = userState.tokens;
                clubTokenDisp.innerText = userState.tokens;

                // Update auth button text even if hidden (as per request)
                const authBtn = document.getElementById('auth-btn');
                authBtn.innerHTML = `
                    <span class="material-symbols-outlined">check_circle</span>
                    Signed in already
                `;
                authBtn.classList.remove('bg-primary');
                authBtn.classList.add('bg-green-600', 'text-white');

                document.getElementById('club-not-authenticated').classList.add('hidden');
                document.getElementById('club-authenticated').classList.remove('hidden');
                themeVault.classList.remove('hidden');
            } else {
                tokenBadge.classList.add('hidden');
                const themesBtn = document.getElementById('header-themes-btn');
                themesBtn.classList.add('hidden');
                themesBtn.classList.remove('flex');

                document.getElementById('club-not-authenticated').classList.remove('hidden');
                document.getElementById('club-authenticated').classList.add('hidden');
                themeVault.classList.add('hidden');
            }

            // POPULATE SHOP
            const shop = document.getElementById('theme-shop');
            shop.innerHTML = '';
            themes.forEach(t => {
                const isOwned = userState.purchasedThemes.includes(t.id);
                const isActive = userState.activeTheme === t.id;
                const card = document.createElement('div');
                card.className = `p-4 bg-white/5 border ${isActive ? 'border-primary shadow-[0_0_12px_rgba(255,77,0,0.4)]' : 'border-white/10'} rounded-xl text-center space-y-2 relative overflow-hidden group hover:bg-white/10 transition-all`;
                card.innerHTML = `
                    <p class="text-[10px] font-black uppercase tracking-widest ${isActive ? 'text-primary' : 'text-gray-400'}">${t.name}</p>
                    <p class="text-[8px] text-gray-500 uppercase font-bold italic">${t.desc}</p>
                    <button class="w-full py-1.5 text-[9px] font-black uppercase rounded-lg border transition-all ${isOwned ? (isActive ? 'bg-zinc-800 text-zinc-500 border-zinc-700 cursor-not-allowed' : 'bg-white/10 text-white border-white/20 hover:bg-white hover:text-black') : (userState.tokens > 0 ? 'bg-primary text-black border-primary font-black hover:scale-105 active:scale-95' : 'bg-gray-800 text-gray-600 border-gray-700 cursor-not-allowed')}">
                        ${isOwned ? (isActive ? 'Equipped' : 'Equip') : 'Buy (1 Token)'}
                    </button>
                `;
                const btn = card.querySelector('button');
                btn.onclick = () => isOwned ? activateTheme(t.id) : purchaseTheme(t.id);
                shop.appendChild(card);
            });

            updateCartUI();
        }

        function updateCartUI() {
            const itemsCont = document.getElementById('cart-items');
            itemsCont.innerHTML = '';
            let subtotal = 0;
            let totalQty = 0;

            cart.forEach(item => {
                subtotal += item.price * item.quantity;
                totalQty += item.quantity;
                const el = document.createElement('div');
                el.className = 'flex justify-between items-center p-4 bg-white/5 rounded-xl border border-white/5';
                el.innerHTML = `<div><p class="font-bold uppercase text-xs italic">${item.name}</p><p class="text-[10px] text-primary font-black">Quantity: ${item.quantity}</p></div><p class="font-black text-sm">Rs. ${(item.price * item.quantity).toLocaleString()}</p>`;
                itemsCont.appendChild(el);
            });

            let discount = 0;
            if (userState.authenticated && userState.tokens > 0) {
                discount = Math.min(userState.tokens * 5, subtotal * 0.5);
                document.getElementById('token-discount-row').classList.remove('hidden');
                document.getElementById('discount-token-applied').innerText = Math.floor(discount / 5);
                document.getElementById('token-discount-value').innerText = `-Rs. ${discount.toLocaleString()}`;
            } else {
                document.getElementById('token-discount-row').classList.add('hidden');
            }

            let finalTotal = subtotal - discount;
            if (obaActive) finalTotal -= 50;
            if (creepyActive) finalTotal *= 0.6;
            if (partyActive) finalTotal *= 0.9; // Party mode: 10% off
            if (obatrexActive) finalTotal *= 0.5; // OBATREX: 50% off

            document.getElementById('cart-subtotal').innerText = `Rs. ${subtotal.toLocaleString()}`;
            document.getElementById('cart-total').innerText = `Rs. ${Math.max(0, Math.floor(finalTotal)).toLocaleString()}`;
            const countBadge = document.getElementById('cart-count');
            countBadge.innerText = totalQty;
            countBadge.classList.toggle('hidden', totalQty === 0);

            const bar = document.getElementById('heat-index-bar');
            bar.style.width = Math.min(100, (totalQty / 30 * 100)) + '%';
        }

        // --- GLOBAL EXPOSURE ---
        window.addToCart = (name, price) => {
            const currentTotal = cart.reduce((s, i) => s + i.quantity, 0);
            if (currentTotal >= 30) return alert("THERMAL LIMIT REACHED. CART IS FULL.");
            const match = cart.find(i => i.name === name);
            if (match) match.quantity++; else cart.push({ name, price, quantity: 1 });
            updateCartUI();
            window.toggleCart(true);
        };

        window.toggleCart = (forceOpen = null) => {
            const drawer = document.getElementById('cart-drawer');
            const scrim = document.getElementById('cart-scrim');
            const isOpen = forceOpen !== null ? !forceOpen : !drawer.classList.contains('translate-x-[-100%]');
            if (!isOpen) {
                drawer.classList.replace('translate-x-[-100%]', 'translate-x-0');
                scrim.classList.remove('hidden');
                setTimeout(() => scrim.classList.add('opacity-100'), 10);
            } else {
                drawer.classList.replace('translate-x-0', 'translate-x-[-100%]');
                scrim.classList.remove('opacity-100');
                setTimeout(() => scrim.classList.add('hidden'), 300);
            }
        };

        const toggleDeals = () => document.getElementById('deals-modal').classList.toggle('hidden');

        // --- FIREBASE LISTENERS ---
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userState.uid = user.uid;
                try {
                    const snap = await get(ref(db, 'users/' + user.uid));
                    if (snap.exists()) {
                        const data = snap.val();
                        userState.tokens = data.tokens ?? 0;
                        userState.purchasedThemes = data.purchasedThemes ?? ["fire-hq"];
                        userState.activeTheme = data.activeTheme ?? "fire-hq";
                        userState.bonusClaimed = data.bonusClaimed ?? true; // If they exist, they likely got it
                    } else {
                        // RECRUIT BONUS: AUTO-GRANT 1 TOKEN ONLY ONCE
                        userState.tokens = 1;
                        userState.bonusClaimed = true;
                        userState.purchasedThemes = ["fire-hq"];
                        userState.activeTheme = "fire-hq";
                        await saveToDB();
                    }
                    userState.authenticated = true;
                    document.getElementById('user-photo').src = user.photoURL || '';
                    document.getElementById('auth-id-display').innerText = user.displayName?.toUpperCase() || 'OPERATOR';
                    document.getElementById('user-email').innerText = user.email || '';
                } catch (e) {
                    console.error("Auth Data Sync Failed:", e);
                }
            } else {
                userState.authenticated = false;
                userState.uid = "";
                userState.tokens = 0;
                userState.purchasedThemes = ["fire-hq"];
                userState.activeTheme = "fire-hq";
            }
            updateUI();
        });

        // --- DOM BUTTON EVENT HANDLERS ---
        document.getElementById('auth-btn').onclick = () => {
            signInWithPopup(auth, provider).catch(e => {
                alert("AUTH FAIL: Firebase Auth is usually blocked on 'file:///' protocols. PLEASE RUN ON A SERVER (localhost) or check FIRE-LAB authorized domains.");
                console.error(e);
            });
        };

        document.getElementById('logout-btn').onclick = () => signOut(auth);
        document.getElementById('cart-btn').onclick = () => window.toggleCart();
        document.getElementById('cart-scrim').onclick = () => window.toggleCart();
        document.getElementById('checkout-btn').onclick = async () => {
            if (cart.length === 0) return;
            alert("Order Dispatched. Thermal Load cleared. +1 Token earned.");
            if (userState.authenticated) {
                userState.tokens += 1;
                await saveToDB();
            }
            cart = [];
            updateCartUI();
            window.toggleCart(false);
            updateUI();
        };

        document.getElementById('nav-deals').onclick = toggleDeals;
        document.getElementById('hero-deals-btn').onclick = toggleDeals;
        document.getElementById('deals-scrim').onclick = toggleDeals;
        document.getElementById('menu-scroll-btn').onclick = () => document.getElementById('menu-section').scrollIntoView({ behavior: 'smooth' });
        document.getElementById('logo-btn').onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
        document.getElementById('header-themes-btn').onclick = () => {
            document.getElementById('discount-club').scrollIntoView({ behavior: 'smooth' });
            // Flash the theme vault to show it
            const vault = document.getElementById('theme-vault-container');
            vault.classList.add('ring-4', 'ring-primary', 'ring-opacity-50');
            setTimeout(() => vault.classList.remove('ring-4', 'ring-primary', 'ring-opacity-50'), 2000);
        };

        // FX: THERMAL TITLE
        document.querySelectorAll('.heat-char').forEach((el, i) => {
            el.onmouseover = () => {
                const temp = 37 + (i * 20);
                document.getElementById('celsius-display').innerText = `Diagnostic: ${temp}°C`;
                el.style.color = i < 3 ? '#3b82f6' : (i < 5 ? '#f59e0b' : '#ef4444');
                el.style.transform = `scale(${1 + i * 0.15}) translateY(-8px)`;
                el.style.textShadow = `0 0 10px ${el.style.color}`;
            };
            el.onmouseout = () => {
                el.style.color = 'white';
                el.style.transform = 'scale(1)';
                el.style.textShadow = 'none';
            };
        });

        // FX: SECRET CODES (VIP ONLY KNOWS THESE!)
        window.addEventListener('keydown', (e) => {
            inputBuffer += e.key.toLowerCase();

            // OBA Mode - Rs. 50 off
            if (inputBuffer.includes("0ba")) {
                obaActive = true;
                document.getElementById('oba-banner').classList.remove('hidden');
                showCodeNotification('OBA MODE', 'Rs. 50 discount activated!', '#9333ea');
                updateCartUI();
                inputBuffer = "";
            }

            // Creepy Mode - 40% off
            if (inputBuffer.includes(creepyCode)) {
                creepyActive = true;
                document.body.classList.add('creepy-mode');
                document.getElementById('creepy-vignette').style.display = 'block';
                document.getElementById('creepy-banner').style.display = 'block';
                showCodeNotification('CREEPY MODE', '40% discount unlocked!', '#ff3333');
                updateCartUI();
                inputBuffer = "";
            }

            // Party Mode - 10% off + Disco
            if (inputBuffer.includes(partyCode) && !partyActive) {
                partyActive = true;
                document.body.classList.add('party-mode');
                showCodeNotification('PARTY MODE', '10% discount + Disco vibes!', '#ec4899');
                startPartyMode();
                updateCartUI();
                inputBuffer = "";
            }

            // OBATREX Mode - 50% off + Glitch BG
            if (inputBuffer.includes(obatrexCode) && !obatrexActive) {
                obatrexActive = true;
                document.getElementById('obatrex-bg').classList.remove('hidden');
                showCodeNotification('OBATREX ACTIVATED', '50% ULTIMATE DISCOUNT!', '#00ff41');
                updateCartUI();
                inputBuffer = "";
            }

            // Matrix Mode - Green rain effect
            if (inputBuffer.includes(matrixCode) && !matrixActive) {
                matrixActive = true;
                document.body.classList.add('matrix-mode');
                showCodeNotification('MATRIX MODE', 'You are the one...', '#00ff41');
                startMatrixRain();
                inputBuffer = "";
            }

            // VIP Mode - +5 tokens
            if (inputBuffer.includes(vipCode) && !vipActive) {
                vipActive = true;
                if (userState.authenticated) {
                    userState.tokens += 5;
                    saveToDB();
                    showCodeNotification('VIP ACCESS', '+5 tokens added!', '#ffd700');
                    updateUI();
                } else {
                    showCodeNotification('VIP ACCESS', 'Sign in to claim tokens!', '#ffd700');
                }
                inputBuffer = "";
            }

            // Rainbow Mode - Color cycling
            if (inputBuffer.includes(rainbowCode) && !rainbowActive) {
                rainbowActive = true;
                document.body.classList.add('rainbow-mode');
                showCodeNotification('RAINBOW MODE', 'Colors activated!', '#ff00ff');
                inputBuffer = "";
            }

            // Turbo Mode - Fast animations
            if (inputBuffer.includes(turboCode) && !turboActive) {
                turboActive = true;
                document.body.classList.add('turbo-mode');
                showCodeNotification('TURBO MODE', 'Maximum speed!', '#00d2ff');
                inputBuffer = "";
            }

            // Ghost Mode - Transparency
            if (inputBuffer.includes(ghostCode) && !ghostActive) {
                ghostActive = true;
                document.body.classList.add('ghost-mode');
                showCodeNotification('GHOST MODE', 'Sp00ky transparency!', '#aaaaaa');
                inputBuffer = "";
            }

            // Lava Mode - Fire intensified
            if (inputBuffer.includes(lavaCode) && !lavaActive) {
                lavaActive = true;
                document.body.classList.add('lava-mode');
                showCodeNotification('LAVA MODE', 'Maximum heat!', '#ff4500');
                inputBuffer = "";
            }

            // Frost Mode - Ice blue
            if (inputBuffer.includes(frostCode) && !frostActive) {
                frostActive = true;
                document.body.classList.add('frost-mode');
                showCodeNotification('FROST MODE', 'Sub-zero activated!', '#00ffff');
                inputBuffer = "";
            }

            // Infinite Mode - +100 tokens (SECRET VIP ONLY)
            if (inputBuffer.includes(infiniteCode)) {
                if (userState.authenticated) {
                    userState.tokens += 100;
                    saveToDB();
                    showCodeNotification('∞ INFINITE MODE ∞', '+100 tokens! You found the ultimate secret!', '#ffd700');
                    updateUI();
                } else {
                    showCodeNotification('∞ INFINITE MODE ∞', 'Sign in to claim!', '#ffd700');
                }
                inputBuffer = "";
            }

            if (inputBuffer.length > 60) inputBuffer = inputBuffer.slice(-60);
        });

        // Code notification popup
        function showCodeNotification(title, message, color) {
            const existing = document.getElementById('code-notification');
            if (existing) existing.remove();

            const notif = document.createElement('div');
            notif.id = 'code-notification';
            notif.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0);
                background: linear-gradient(135deg, ${color}22, ${color}44);
                border: 2px solid ${color};
                border-radius: 20px;
                padding: 30px 50px;
                text-align: center;
                z-index: 99999;
                animation: codePopIn 0.5s forwards;
                box-shadow: 0 0 60px ${color}66;
            `;
            notif.innerHTML = `
                <h2 style="font-family: 'Orbitron', sans-serif; font-size: 28px; font-weight: 900; color: ${color}; margin-bottom: 10px; text-shadow: 0 0 20px ${color};">${title}</h2>
                <p style="color: white; font-size: 14px;">${message}</p>
            `;
            document.body.appendChild(notif);

            setTimeout(() => {
                notif.style.animation = 'codePopOut 0.3s forwards';
                setTimeout(() => notif.remove(), 300);
            }, 2500);
        }

        // Party mode disco effect
        function startPartyMode() {
            const colors = ['#ff0066', '#00ff66', '#6600ff', '#ff6600', '#00ffff', '#ffff00'];
            let i = 0;
            setInterval(() => {
                if (partyActive) {
                    document.body.style.boxShadow = `inset 0 0 100px ${colors[i % colors.length]}44`;
                    i++;
                }
            }, 500);
        }

        // Matrix rain effect
        function startMatrixRain() {
            const canvas = document.createElement('canvas');
            canvas.id = 'matrix-canvas';
            canvas.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;opacity:0.15;';
            document.body.appendChild(canvas);
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()';
            const fontSize = 14;
            const columns = canvas.width / fontSize;
            const drops = Array(Math.floor(columns)).fill(1);

            setInterval(() => {
                if (!matrixActive) return;
                ctx.fillStyle = 'rgba(0,0,0,0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#00ff41';
                ctx.font = fontSize + 'px monospace';
                drops.forEach((y, i) => {
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    ctx.fillText(char, i * fontSize, y * fontSize);
                    if (y * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                    drops[i]++;
                });
            }, 50);
        }

        // FX: CREEPY SPOTLIGHT
        document.addEventListener('mousemove', (e) => {
            if (creepyActive) {
                const v = document.getElementById('creepy-vignette');
                v.style.setProperty('--x', e.clientX + 'px');
                v.style.setProperty('--y', e.clientY + 'px');
            }
        });

        // FX: EMBERS
        setInterval(() => {
            const container = document.getElementById('ember-container-club');
            if (!container) return;
            const ember = document.createElement('div');
            ember.className = 'ember';
            const size = Math.random() * 5 + 2;
            ember.style.width = size + 'px'; ember.style.height = size + 'px';
            ember.style.left = Math.random() * 100 + '%'; ember.style.bottom = '0';
            ember.style.animation = `ember ${Math.random() * 3 + 4}s infinite linear`;
            container.appendChild(ember);
            setTimeout(() => ember.remove(), 7000);
        }, 300);

        // VIP Challenge Modal Logic
        function showVipModal() {
            const modal = document.getElementById('vip-challenge-modal');
            if (modal) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden'; // Prevent scroll
            }
        }

        function closeVipModal() {
            const modal = document.getElementById('vip-challenge-modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = ''; // Restore scroll
            }
        }

        document.getElementById('vip-idea-form')?.addEventListener('submit', async function (e) {
            e.preventDefault();
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;

            const name = document.getElementById('burger-name').value;
            const recipe = document.getElementById('burger-recipe').value;
            const style = document.getElementById('burger-style').value;

            btn.innerHTML = '<span class="animate-spin material-symbols-outlined">sync</span> Sending...';
            btn.disabled = true;

            try {
                const response = await fetch("https://formsubmit.co/ajax/oforomarbinamir@gmail.com", {
                    method: "POST",
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        subject: `VIP BURGER CHALLENGE: ${name}`,
                        Burger_Name: name,
                        Recipe: recipe,
                        Style: style,
                        _template: 'table'
                    })
                });

                if (response.ok) {
                    alert("✅ CHALLENGE SUBMITTED! OMAR has received your idea. Check back in 30 days!");
                    closeVipModal();
                } else {
                    throw new Error("Submission failed");
                }
            } catch (err) {
                console.error(err);
                alert("❌ Connection Error. Opening email client instead...");
                const subject = encodeURIComponent(`VIP IDEA CHALLENGE ENTRY: ${name}`);
                const body = encodeURIComponent(`BURGER NAME: ${name}\n\nRECIPE:\n${recipe}\n\nSTYLE:\n${style}`);
                window.location.href = `mailto:oforomarbinamir@gmail.com?subject=${subject}&body=${body}`;
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        // STARTUP
        updateUI();

        // Show VIP Challenge Modal on start
        window.addEventListener('load', () => {
            setTimeout(showVipModal, 2000);
        });
    </script>
</body>

</html>