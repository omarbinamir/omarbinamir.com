<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <title>omarbinamir.com 🌟</title>
  <svg width="400" height="100" xmlns="http://www.w3.org/2000/svg">
    <rect width="100" height="100" rx="15" fill="#2980b9" />
    <text x="50" y="65" font-size="50" font-family="Arial, sans-serif" font-weight="bold" fill="white" text-anchor="middle">OBA</text>
    <text x="120" y="60" font-size="32" font-family="Arial, sans-serif" fill="#2c3e50">omarbinamir.com</text>
  </svg>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
  <h1>🎉 Welcome to omarbinamir.com! 😊</h1>

  <nav class="sparkly-menu">
    <ul>
      <li><a href="postingo.html" class="menu-item">🎈 comeingsoon</a></li>
      <li><a href="#" class="menu-item">🎥 comeingsoon</a></li>
      <li><a href="#" class="menu-item">👋 comeingsoon</a></li>
      <li><a href="#" class="menu-item">🍕 comeingsoon</a></li>
      <li><a href="#" class="menu-item">🌟 comeingsoon</a></li>
      <li><a href="obalab.html" class="menu-item" >🌟 Obalab</a></li>
    </ul>
  </nav>

  <div style="margin-top: 2em;">
    <p>Visitors online right now: <span id="onlineCount">0</span></p>
    <p>Total visitors ever: <span id="totalVisits">0</span></p>
  </div>

  <script>
    // TODO: REPLACE the following with YOUR actual Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyExample-YourAPIKeyHere",
      authDomain: "your-project-id.firebaseapp.com",
      databaseURL: "https://your-project-id-default-rtdb.firebaseio.com",
      projectId: "your-project-id",
      storageBucket: "your-project-id.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:abcdef123456"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    const onlineCountEl = document.getElementById('onlineCount');
    const totalVisitsEl = document.getElementById('totalVisits');

    // Reference for online users
    const onlineRef = database.ref('/onlineUsers');
    // Reference for total visits count
    const totalVisitsRef = database.ref('/totalVisits');

    // Increment total visits only once per user using localStorage
    if (!localStorage.getItem('visited')) {
      totalVisitsRef.transaction(current => (current || 0) + 1);
      localStorage.setItem('visited', 'true');
    }

    // Update total visits display
    totalVisitsRef.on('value', snapshot => {
      totalVisitsEl.textContent = snapshot.val() || 0;
    });

    // Create a unique ID for this user session
    const userId = 'user_' + Math.random().toString(36).substr(2, 9);

    // Reference for this user's online status
    const userStatusRef = onlineRef.child(userId);

    // Set user online in the database
    userStatusRef.set(true);

    // Remove user from online list on disconnect (close tab, etc)
    userStatusRef.onDisconnect().remove();

    // Update online users count display
    onlineRef.on('value', snapshot => {
      const count = snapshot.numChildren();
      onlineCountEl.textContent = count;
    });
  </script>
</body>
</html>
